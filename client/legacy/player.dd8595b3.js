import{_ as n,a as t,b as o,c as e,i as a,s as i,d as r,S as c,e as f,t as l,g as u,h as s,j as d,k as m,l as k,I as h,m as p,o as v,f as g,q as $,y as b,w as T,E as y,v as w,x as E,J as _,D,P as N,z as L,G as P,n as j,K as I}from"./chunk.2a6b84c9.js";import B from"./token.a0cbecd3.js";import O from"./addToken.fef6e86d.js";import V from"./tabLink.a1c1dfc1.js";function H(n,t,o){var e=Object.create(n);return e.temp_token=t[o],e}function S(n){var t,o,e;return{c:function(){t=f("button"),o=l("-1"),this.h()},l:function(n){t=u(n,"BUTTON",{class:!0},!1);var e=s(t);o=d(e,"-1"),e.forEach(m),this.h()},h:function(){k(t,"class","btn btn-dark"),e=h(t,"click",n.subLife)},m:function(n,e){p(n,t,e),v(t,o)},d:function(n){n&&m(t),e()}}}function U(n){for(var t,o,e,a,i=n.tokens,r=[],c=0;c<i.length;c+=1)r[c]=K(H(n,i,c));var l=function(n){return T(r[n],1,function(){r[n]=null})},h=void 0!==n.tokens.filter(n.func)[0]&&null!=n.token.power&&X(n);return{c:function(){t=f("div");for(var n=0;n<r.length;n+=1)r[n].c();o=g(),h&&h.c(),e=L(),this.h()},l:function(n){t=u(n,"DIV",{class:!0},!1);for(var a=s(t),i=0;i<r.length;i+=1)r[i].l(a);a.forEach(m),o=d(n,"\n        "),h&&h.l(n),e=L(),this.h()},h:function(){k(t,"class","tabs")},m:function(n,i){p(n,t,i);for(var c=0;c<r.length;c+=1)r[c].m(t,null);p(n,o,i),h&&h.m(n,i),p(n,e,i),a=!0},p:function(n,o){if(n.tokens){i=o.tokens;for(var a=0;a<i.length;a+=1){var c=H(o,i,a);r[a]?(r[a].p(n,c),w(r[a],1)):(r[a]=K(c),r[a].c(),w(r[a],1),r[a].m(t,null))}for(D(),a=i.length;a<r.length;a+=1)l(a);y()}void 0!==o.tokens.filter(o.func)[0]&&null!=o.token.power?h?(h.p(n,o),w(h,1)):((h=X(o)).c(),w(h,1),h.m(e.parentNode,e)):h&&(D(),T(h,1,function(){h=null}),y())},i:function(n){if(!a){for(var t=0;t<i.length;t+=1)w(r[t]);w(h),a=!0}},o:function(n){r=r.filter(Boolean);for(var t=0;t<r.length;t+=1)T(r[t]);T(h),a=!1},d:function(n){n&&m(t),P(r,n),n&&m(o),h&&h.d(n),n&&m(e)}}}function x(n){var t,o;return{c:function(){t=f("h2"),o=l("No Tokens Loaded")},l:function(n){t=u(n,"H2",{},!1);var e=s(t);o=d(e,"No Tokens Loaded"),e.forEach(m)},m:function(n,e){p(n,t,e),v(t,o)},p:j,i:j,o:j,d:function(n){n&&m(t)}}}function K(n){var t,o=new V({props:{name:n.temp_token.name,color:n.temp_token.color,id:n.temp_token.id}});return o.$on("opentoken",n.openToken),{c:function(){o.$$.fragment.c()},l:function(n){o.$$.fragment.l(n)},m:function(n,e){$(o,n,e),t=!0},p:function(n,t){var e={};n.tokens&&(e.name=t.temp_token.name),n.tokens&&(e.color=t.temp_token.color),n.tokens&&(e.id=t.temp_token.id),o.$set(e)},i:function(n){t||(w(o.$$.fragment,n),t=!0)},o:function(n){T(o.$$.fragment,n),t=!1},d:function(n){E(o,n)}}}function X(n){var t,o,e=new B({props:{name:n.token.name,color:n.token.color,power:n.token.power,tough:n.token.tough,ability:n.token.ability,tapped:n.token.tapped,id:n.token.id}});return e.$on("removetoken",n.removeToken),e.$on("update",n.updateToken),{c:function(){t=f("div"),e.$$.fragment.c(),this.h()},l:function(n){t=u(n,"DIV",{class:!0},!1);var o=s(t);e.$$.fragment.l(o),o.forEach(m),this.h()},h:function(){k(t,"class","tabcontent")},m:function(n,a){p(n,t,a),$(e,t,null),o=!0},p:function(n,t){var o={};n.token&&(o.name=t.token.name),n.token&&(o.color=t.token.color),n.token&&(o.power=t.token.power),n.token&&(o.tough=t.token.tough),n.token&&(o.ability=t.token.ability),n.token&&(o.tapped=t.token.tapped),n.token&&(o.id=t.token.id),e.$set(o)},i:function(n){o||(w(e.$$.fragment,n),o=!0)},o:function(n){T(e.$$.fragment,n),o=!1},d:function(n){n&&m(t),E(e)}}}function q(n){var t,o,e,a,i,r,c,N,L,P,j,I,B,V,H,K,X,q,z,A,G=n.life>0&&S(n),J=new O({});J.$on("addtoken",n.addToken);var M=[x,U],C=[];function F(n){return n.tokens.length<1?0:1}return X=F(n),q=C[X]=M[X](n),{c:function(){t=f("div"),o=f("h1"),e=l(n.name),a=g(),i=f("h3"),r=l(n.life),c=g(),N=f("button"),L=l("+1"),P=g(),G&&G.c(),j=g(),I=f("button"),B=l("X"),V=g(),H=f("div"),J.$$.fragment.c(),K=g(),q.c(),this.h()},l:function(f){t=u(f,"DIV",{class:!0},!1);var l=s(t);o=u(l,"H1",{},!1);var k=s(o);e=d(k,n.name),k.forEach(m),a=d(l,"\n    "),i=u(l,"H3",{},!1);var h=s(i);r=d(h,n.life),h.forEach(m),c=d(l,"\n    "),N=u(l,"BUTTON",{class:!0},!1);var p=s(N);L=d(p,"+1"),p.forEach(m),P=d(l,"\n    "),G&&G.l(l),j=d(l,"\n    "),I=u(l,"BUTTON",{class:!0},!1);var v=s(I);B=d(v,"X"),v.forEach(m),V=d(l," \n    "),H=u(l,"DIV",{class:!0},!1);var g=s(H);J.$$.fragment.l(g),g.forEach(m),K=d(l,"\n    "),q.l(l),l.forEach(m),this.h()},h:function(){k(N,"class","btn btn-success"),k(I,"class","btn btn-danger btn-sm"),k(H,"class","container"),k(t,"class","card"),A=[h(N,"click",n.addLife),h(I,"click",n.onDelete)]},m:function(n,f){p(n,t,f),v(t,o),v(o,e),v(t,a),v(t,i),v(i,r),v(t,c),v(t,N),v(N,L),v(t,P),G&&G.m(t,null),v(t,j),v(t,I),v(I,B),v(t,V),v(t,H),$(J,H,null),v(t,K),C[X].m(t,null),z=!0},p:function(n,o){z&&!n.name||b(e,o.name),z&&!n.life||b(r,o.life),o.life>0?G||((G=S(o)).c(),G.m(t,j)):G&&(G.d(1),G=null);var a=X;(X=F(o))===a?C[X].p(n,o):(D(),T(C[a],1,function(){C[a]=null}),y(),(q=C[X])||(q=C[X]=M[X](o)).c(),w(q,1),q.m(t,null))},i:function(n){z||(w(J.$$.fragment,n),w(q),z=!0)},o:function(n){T(J.$$.fragment,n),T(q),z=!1},d:function(n){n&&m(t),G&&G.d(),E(J),C[X].d(),_(A)}}}function z(n,t,o){var e=I(),a=t.name,i=t.life,r=function(){return Math.random().toString(36).substr(2)},c=function(){return r()+r()},f=[{name:"TOKEN TABS: ",color:"",power:null,tough:null,ability:"None",tapped:!1,id:0}],l=f[0],u=t.savePlayer,s=void 0===u?{e_name:a,e_life:i,e_tokens:f,e_matchID:c()}:u;return n.$set=function(n){"name"in n&&o("name",a=n.name),"life"in n&&o("life",i=n.life),"savePlayer"in n&&o("savePlayer",s=n.savePlayer)},{name:a,life:i,addLife:function(){var n=i+=1;return o("life",i),n},subLife:function(){var n=i-=1;return o("life",i),n},onDelete:function(){return e("removeplayer",a)},tokens:f,token:l,addToken:function(n){console.log(n.detail[0]);for(var t=0;t<n.detail[1];t++){var e=n.detail[0];o("tokens",f=[].concat(N(f),[{name:e.name,color:e.color,power:e.power,tough:e.tough,ability:e.ability,tapped:e.tapped,id:c()}])),console.log(f)}},removeToken:function(n){o("tokens",f=f.filter(function(t){return t.id!==n.detail}))},openToken:function(n){o("token",l=f.filter(function(t){return t.id===n.detail})[0])},updateToken:function(n){var t=f.length;o("token",l=n.detail);for(var e=0;e<t;e++)for(var a in f[e])if(f[e][a]===l.id){console.log(l),f.splice(e,1,l),console.log(f);break}},savePlayer:s,func:function(n){return n.id===l.id}}}export default(function(f){function l(n){var c;return t(this,l),c=o(this,e(l).call(this)),a(r(c),n,z,q,i,["name","life","savePlayer"]),c}return n(l,c),l}());
//# sourceMappingURL=player.dd8595b3.js.map
